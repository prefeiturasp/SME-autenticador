jQuery.fn.validation=function(g){g=g||{};g.type=g.type||"alphasInt";g.add=g.add||"";g.empty=g.empty||"si";g.ctrl=g.ctrl||"si";g.onError=typeof g.onError=="function"?g.onError:function(){};g.onDone=typeof g.onDone=="function"?g.onDone:function(){};this.keypress(function(n){key=l(n);g.OBJ=this;if(g.ctrl=="si"){if((n.ctrlKey&&key==97)||(n.ctrlKey&&key==65)){return true}if((n.ctrlKey&&key==120)||(n.ctrlKey&&key==88)){return true}if((n.ctrlKey&&key==99)||(n.ctrlKey&&key==67)){return true}if((n.ctrlKey&&key==122)||(n.ctrlKey&&key==90)){return true}if((n.ctrlKey&&key==118)||(n.ctrlKey&&key==86)||(n.shiftKey&&key==45)){return true}}else{if((n.ctrlKey&&key==97)||(n.ctrlKey&&key==65)){return false}if((n.ctrlKey&&key==120)||(n.ctrlKey&&key==88)){return false}if((n.ctrlKey&&key==99)||(n.ctrlKey&&key==67)){return false}if((n.ctrlKey&&key==122)||(n.ctrlKey&&key==90)){return false}if((n.ctrlKey&&key==118)||(n.ctrlKey&&key==86)||(n.shiftKey&&key==45)){return false}}if(key==undefined){return true}return k(key)});this.blur(function(){if(g.empty=="no"&&this.value.length==0){g.onError.apply(this);return false}valid=1;for(j=0;j<this.value.length;j++){if(k(this.value.charCodeAt(j))!=true){valid=0}}if(g.type=="mail"&&this.value.length>0){valid=c(this.value)}if(valid==0){g.onError.apply(this)}else{g.onDone.apply(this)}});function k(n){if(n==8||n==13){return true}if(g.add!=""&&d(n,g.add)){return true}if(g.type=="int"){return f(n)}else{if(g.type=="lower"){return h(n)}else{if(g.type=="lowers"){return(h(n)||d(n,"тащийм"))}else{if(g.type=="upper"){return b(n)}else{if(g.type=="uppers"){return(b(n)||d(n,"тащийм"))}else{if(g.type=="alpha"){return(h(n)||b(n))}else{if(g.type=="alphas"){return(h(n)||b(n)||d(n,"тащийм"))}else{if(g.type=="lowerInt"){return(h(n)||f(n))}else{if(g.type=="lowersInt"){return(h(n)||f(n)||d(n,"тащийм"))}else{if(g.type=="upperInt"){return(b(n)||f(n))}else{if(g.type=="uppersInt"){return(b(n)||f(n)||d(n,"тащийм"))}else{if(g.type=="alphaInt"){return(h(n)||b(n)||f(n))}else{if(g.type=="alphasInt"){return(h(n)||b(n)||f(n)||d(n,"тащийм"))}else{if(g.type=="nick"){return(h(n)||b(n)||f(n)||d(n,"-_ .@"))}else{if(g.type=="mail"){return a(n)}}}}}}}}}}}}}}}}function l(n){if(window.event){return n.keyCode}else{if(n.which){return n.which}}}function d(n,o){for(i=0;i<o.length;i++){if(n==o.charCodeAt(i)){return true}}return false}function f(n){return(n>=48&&n<=57)}function b(n){return(n>=65&&n<=90)}function h(n){return(n>=97&&n<=122)}function a(n){if(h(n)||b(n)||f(n)||d(n,"-_.@")){if((n==46||n==45||n==95||n==64)&&g.OBJ.value.length==0){return false}if(f(n)&&g.OBJ.value.length==0){return false}if((n==46||n==45||n==95||n==64)&&g.OBJ.value[g.OBJ.value.length-1]=="."){return false}cb=g.OBJ.value[g.OBJ.value.length-1];if((n==46||n==64)&&(cb=="-"||cb=="_"||cb=="@"||cb==".")){return false}if(n==64&&g.OBJ.value.length<3){return false}if(g.OBJ.value.indexOf("@")!=-1){if(n==64){return false}offSet=g.OBJ.value.length-g.OBJ.value.indexOf("@");if((n==46||n==45||n==95)&&offSet==1){return false}if(n==46&&offSet<4){return false}}}else{return false}}function m(n){$("#test").html($("#test").html()+"<br>"+n+" - "+String.fromCharCode(n))}function e(n){$("#test").html($("#test").html()+"<br>"+n)}function c(n){if(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/.test(n)){return true}else{return false}}};